<?xml version="1.0" encoding="utf-8"?>
<Defs>
  
  <!-- Stinger Ability -->
  <AbilityDef>
    <defName>DMC_Stinger</defName>
    <label>stinger</label>
    <description>A lightning-fast dash attack that teleports the user to an adjacent cell of the target and strikes instantly with the equipped melee weapon. Deals 20% increased damage and works with any melee weapon.</description>
    <iconPath>UI/Abilities/Stinger</iconPath>
    <cooldownTicksRange>300</cooldownTicksRange> <!-- 5 seconds -->
    <aiCanUse>true</aiCanUse>
    <verbProperties>
      <verbClass>DMCAbilities.Verb_Stinger</verbClass>
      <range>15</range>
      <warmupTime>0.5</warmupTime>
      <soundCast>Pawn_Melee_Punch_HitPawn</soundCast>
      <targetParams>
        <canTargetPawns>true</canTargetPawns>
        <canTargetBuildings>false</canTargetBuildings>
        <canTargetItems>false</canTargetItems>
        <canTargetLocations>false</canTargetLocations>
        <canTargetSelf>false</canTargetSelf>
        <showRangeOnSelect>true</showRangeOnSelect>
      </targetParams>
    </verbProperties>
    <jobDef>CastAbilityOnThing</jobDef>
  </AbilityDef>

  <!-- Judgement Cut Ability -->
  <AbilityDef>
    <defName>DMC_JudgementCut</defName>
    <label>judgement cut</label>
    <description>A devastating ranged slash attack that creates dimensional cuts at the target location. After a brief warmup, unleashes 1-3 concentrated slashes that all strike the same target area, dealing stacked area damage based on the equipped melee weapon. Each slash affects a 2-tile radius.</description>
    <iconPath>UI/Abilities/JudgementCut</iconPath>
    <cooldownTicksRange>420</cooldownTicksRange> <!-- 7 seconds -->
    <aiCanUse>true</aiCanUse>
    <verbProperties>
      <verbClass>DMCAbilities.Verb_JudgementCut</verbClass>
      <range>20</range>
      <warmupTime>1.0</warmupTime>
      <soundCast>Psycast_Skip_Pulse</soundCast>
      <targetParams>
        <canTargetPawns>true</canTargetPawns>
        <canTargetBuildings>false</canTargetBuildings>
        <canTargetItems>false</canTargetItems>
        <canTargetLocations>true</canTargetLocations>
        <canTargetSelf>false</canTargetSelf>
        <showRangeOnSelect>true</showRangeOnSelect>
      </targetParams>
    </verbProperties>
    <jobDef>CastAbilityOnCell</jobDef>
  </AbilityDef>

  <!-- Drive Ability -->
  <AbilityDef>
    <defName>DMC_Drive</defName>
    <label>drive</label>
    <description>A vertical slash attack that creates 1-3 energy projectiles traveling in a straight line. Projectiles pass through buildings and hit all enemies in their path. The final projectile (when multiple are created) deals enhanced damage and applies continuous burning damage over time.</description>
    <iconPath>UI/Abilities/Drive</iconPath>
    <cooldownTicksRange>600</cooldownTicksRange> <!-- 10 seconds -->
    <aiCanUse>true</aiCanUse>
    <verbProperties>
      <verbClass>DMCAbilities.Verb_Drive</verbClass>
      <range>25</range>
      <warmupTime>0.8</warmupTime>
      <soundCast>Psycast_Skip_Pulse</soundCast>
      <targetParams>
        <canTargetPawns>true</canTargetPawns>
        <canTargetBuildings>false</canTargetBuildings>
        <canTargetItems>false</canTargetItems>
        <canTargetLocations>true</canTargetLocations>
        <canTargetSelf>false</canTargetSelf>
        <showRangeOnSelect>true</showRangeOnSelect>
      </targetParams>
    </verbProperties>
    <jobDef>CastAbilityOnCell</jobDef>
  </AbilityDef>

  <!-- Void Slash Ability Definition -->
  <AbilityDef>
    <defName>DMC_VoidSlash</defName>
    <label>void slash</label>
    <description>Unleash a void-infused melee slash in a cone that damages and debuffs enemies, reducing their movement speed and combat effectiveness while causing bleeding. Melee weapon required.</description>
    <iconPath>UI/Abilities/VoidSlash</iconPath>
    <cooldownTicksRange>900</cooldownTicksRange> <!-- 15 seconds -->
    <verbProperties>
      <verbClass>DMCAbilities.Verb_VoidSlash</verbClass>
      <range>4</range> <!-- Short melee range -->
      <warmupTime>0.5</warmupTime> <!-- Quick 0.5 second warmup -->
      <targetParams>
        <canTargetLocations>true</canTargetLocations>
        <canTargetPawns>false</canTargetPawns>
        <canTargetBuildings>false</canTargetBuildings>
        <showRangeOnSelect>true</showRangeOnSelect>
      </targetParams>
    </verbProperties>
    <gizmoClass>Command_Ability</gizmoClass>
    <showPsycastEffects>false</showPsycastEffects>
    <displayGizmoWhileUndrafted>false</displayGizmoWhileUndrafted>
    <disableGizmoWhileUndrafted>false</disableGizmoWhileUndrafted>
    <category>DMCAbilities</category>
  </AbilityDef>

  <!-- Gun Stinger Ability -->
  <AbilityDef>
    <defName>DMC_GunStinger</defName>
    <label>gun stinger</label>
    <description>Teleports behind a target and fires a shotgun blast at point-blank range. Only works with shotgun weapons. Has a small chance to cause burn damage.</description>
    <iconPath>UI/Abilities/GunStinger</iconPath>
    <cooldownTicksRange>900</cooldownTicksRange> <!-- 15 seconds -->
    <aiCanUse>true</aiCanUse>
    <verbProperties>
      <verbClass>DMCAbilities.Verb_GunStinger</verbClass>
      <range>12</range>
      <warmupTime>0</warmupTime>
      <targetParams>
        <canTargetPawns>true</canTargetPawns>
        <canTargetBuildings>false</canTargetBuildings>
        <canTargetItems>false</canTargetItems>
        <canTargetLocations>false</canTargetLocations>
        <canTargetSelf>false</canTargetSelf>
        <showRangeOnSelect>true</showRangeOnSelect>
      </targetParams>
    </verbProperties>
    <jobDef>CastAbilityOnThing</jobDef>
  </AbilityDef>

  <!-- Heavy Rain Ability -->
  <AbilityDef>
    <defName>DMC_HeavyRain</defName>
    <label>heavy rain</label>
    <description>Summons a rain of spectral swords over a large area. Swords fall randomly within the target zone, each dealing 15-20 damage and applying debuffing spectral wounds. Number of swords increases with melee skill. Has a chance to summon a massive special sword with enhanced effects.</description>
    <iconPath>UI/Abilities/HeavyRain</iconPath>
    <cooldownTicksRange>780</cooldownTicksRange> <!-- 13 seconds -->
    <aiCanUse>true</aiCanUse>
    <verbProperties>
      <verbClass>DMCAbilities.Verb_HeavyRain</verbClass>
      <range>25</range>
      <warmupTime>1.2</warmupTime>
      <soundCast>Psycast_Skip_Pulse</soundCast>
      <targetParams>
        <canTargetPawns>false</canTargetPawns>
        <canTargetBuildings>false</canTargetBuildings>
        <canTargetItems>false</canTargetItems>
        <canTargetLocations>true</canTargetLocations>
        <canTargetSelf>false</canTargetSelf>
        <showRangeOnSelect>true</showRangeOnSelect>
      </targetParams>
    </verbProperties>
    <jobDef>CastAbilityOnCell</jobDef>
  </AbilityDef>

  <!-- Job definition for Drive delayed launch -->
  <JobDef>
    <defName>DMC_DriveDelayedLaunch</defName>
    <driverClass>DMCAbilities.JobDriver_DriveDelayedLaunch</driverClass>
    <reportString>launching drive projectiles</reportString>
    <allowOpportunisticPrefix>false</allowOpportunisticPrefix>
  </JobDef>

  <!-- Job definition for Heavy Rain casting -->
  <JobDef>
    <defName>DMC_HeavyRainCast</defName>
    <driverClass>DMCAbilities.JobDriver_HeavyRainCast</driverClass>
    <reportString>summoning heavy rain</reportString>
    <allowOpportunisticPrefix>false</allowOpportunisticPrefix>
  </JobDef>

  <!-- Job definition for Red Hot Night casting -->
  <JobDef>
    <defName>DMC_RedHotNightCast</defName>
    <driverClass>DMCAbilities.JobDriver_RedHotNightCast</driverClass>
    <reportString>summoning red orbs</reportString>
    <allowOpportunisticPrefix>false</allowOpportunisticPrefix>
  </JobDef>

  <!-- Projectile definition for Drive slash -->
  <ThingDef ParentName="BaseBullet">
    <defName>DMC_DriveSlashProjectile</defName>
    <label>drive slash</label>
    <thingClass>DMCAbilities.Projectile_DriveSlash</thingClass>
    <category>Projectile</category>
    <tickerType>Normal</tickerType>
    <altitudeLayer>Projectile</altitudeLayer>
    <useHitPoints>false</useHitPoints>
    <neverMultiSelect>true</neverMultiSelect>
    <graphicData>
      <texPath>Things/Projectile/Bullet_Small</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <shaderType>TransparentPostLight</shaderType>
      <color>(0.9, 0.9, 1.0)</color>
    </graphicData>
    <projectile>
      <damageDef>Cut</damageDef>
      <damageAmountBase>1</damageAmountBase>
      <speed>40</speed>
      <range>25</range>
      <flyOverhead>false</flyOverhead>
    </projectile>
  </ThingDef>

  <!-- Spectral Sword Projectile -->
  <ThingDef ParentName="BaseBullet">
    <defName>DMC_SpectralSwordProjectile</defName>
    <label>spectral sword</label>
    <thingClass>DMCAbilities.Projectile_SpectralSword</thingClass>
    <category>Projectile</category>
    <tickerType>Normal</tickerType>
    <altitudeLayer>Projectile</altitudeLayer>
    <useHitPoints>false</useHitPoints>
    <neverMultiSelect>true</neverMultiSelect>
    <graphicData>
      <texPath>Things/Projectile/Bullet_Small</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <shaderType>TransparentPostLight</shaderType>
      <color>(0.5, 0.3, 0.8)</color>
    </graphicData>
    <projectile>
      <damageDef>Cut</damageDef>
      <damageAmountBase>18</damageAmountBase>
      <speed>30</speed>
      <range>10</range>
      <flyOverhead>true</flyOverhead>
    </projectile>
  </ThingDef>

  <!-- Special Spectral Sword Projectile -->
  <ThingDef ParentName="BaseBullet">
    <defName>DMC_SpectralSwordSpecialProjectile</defName>
    <label>summoned spectral blade</label>
    <thingClass>DMCAbilities.Projectile_SpectralSwordSpecial</thingClass>
    <category>Projectile</category>
    <tickerType>Normal</tickerType>
    <altitudeLayer>Projectile</altitudeLayer>
    <useHitPoints>false</useHitPoints>
    <neverMultiSelect>true</neverMultiSelect>
    <graphicData>
      <texPath>Things/Projectile/Bullet_Small</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <shaderType>TransparentPostLight</shaderType>
      <color>(0.2, 0.4, 1.0)</color>
      <drawSize>(2, 2)</drawSize>
    </graphicData>
    <projectile>
      <damageDef>Cut</damageDef>
      <damageAmountBase>35</damageAmountBase>
      <speed>25</speed>
      <range>15</range>
      <flyOverhead>true</flyOverhead>
      <explosionRadius>4</explosionRadius>
    </projectile>
  </ThingDef>

  <!-- Rain Bullet Ability -->
  <AbilityDef>
    <defName>DMC_RainBullet</defName>
    <label>rain bullet</label>
    <description>Leap through the air toward your target, continuously firing 3-6 bullets per cell traveled during the jump, then land dramatically at the target position. The farther you jump, the more bullets are fired! Jump height scales with melee skill, bullets per cell scale with shooting skill. Each bullet lands randomly within a small area and has a 10% chance to stagger. Requires a pistol or revolver equipped. Target must be 6-10 cells away.</description>
    <iconPath>UI/Abilities/Rainstrom</iconPath>
    <cooldownTicksRange>480</cooldownTicksRange> <!-- 8 seconds -->
    <aiCanUse>true</aiCanUse>
    <verbProperties>
      <verbClass>DMCAbilities.Verb_RainBullet</verbClass>
      <range>10</range>
      <minRange>6</minRange>
      <warmupTime>0.3</warmupTime>
      <soundCast>Pawn_Melee_Punch_Miss</soundCast>
      <targetParams>
        <canTargetPawns>true</canTargetPawns>
        <canTargetBuildings>false</canTargetBuildings>
        <canTargetItems>false</canTargetItems>
        <canTargetLocations>true</canTargetLocations>
        <canTargetSelf>false</canTargetSelf>
        <showRangeOnSelect>true</showRangeOnSelect>
      </targetParams>
    </verbProperties>
    <jobDef>CastAbilityOnCell</jobDef>
  </AbilityDef>

  <!-- Job definition for Rain Bullet casting -->
  <JobDef>
    <defName>DMC_RainBulletCast</defName>
    <driverClass>DMCAbilities.JobDriver_RainBulletCast</driverClass>
    <reportString>raining bullets</reportString>
    <allowOpportunisticPrefix>false</allowOpportunisticPrefix>
  </JobDef>

  <!-- Rain Bullet Projectile -->
  <ThingDef ParentName="BaseBullet">
    <defName>DMC_RainBulletProjectile</defName>
    <label>rain bullet</label>
    <thingClass>DMCAbilities.Projectile_RainBullet</thingClass>
    <category>Projectile</category>
    <tickerType>Normal</tickerType>
    <altitudeLayer>Projectile</altitudeLayer>
    <useHitPoints>false</useHitPoints>
    <neverMultiSelect>true</neverMultiSelect>
    <graphicData>
      <texPath>Things/Projectile/Bullet_Small</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <shaderType>TransparentPostLight</shaderType>
      <color>(0.9, 0.7, 0.2)</color>
    </graphicData>
    <projectile>
      <damageDef>Bullet</damageDef>
      <damageAmountBase>1</damageAmountBase>
      <speed>50</speed>
      <range>15</range>
      <flyOverhead>true</flyOverhead>
    </projectile>
  </ThingDef>

  <!-- Rapid Slash Ability -->
  <AbilityDef>
    <defName>DMC_RapidSlash</defName>
    <label>rapid slash</label>
    <description>Dash forward, relentlessly slashing everything in your path. Creates a 3x3 damage area around each position during the dash. Can target terrain or enemies. Dash range scales with melee skill (10-20 cells). Requires a melee weapon.</description>
    <iconPath>UI/Abilities/RapidSlash</iconPath>
    <cooldownTicksRange>600</cooldownTicksRange> <!-- 10 seconds -->
    <aiCanUse>true</aiCanUse>
    <verbProperties>
      <verbClass>DMCAbilities.Verb_RapidSlash</verbClass>
      <range>15</range>
      <warmupTime>0.2</warmupTime>
      <soundCast>Pawn_Melee_Blade_Stab</soundCast>
      <targetParams>
        <canTargetPawns>true</canTargetPawns>
        <canTargetBuildings>false</canTargetBuildings>
        <canTargetItems>false</canTargetItems>
        <canTargetLocations>true</canTargetLocations>
        <canTargetSelf>false</canTargetSelf>
        <showRangeOnSelect>true</showRangeOnSelect>
      </targetParams>
    </verbProperties>
    <jobDef>CastAbilityOnThingOrLocation</jobDef>
  </AbilityDef>

  <!-- Job definition for Rapid Slash casting -->
  <JobDef>
    <defName>DMC_RapidSlashCast</defName>
    <driverClass>DMCAbilities.JobDriver_RapidSlashCast</driverClass>
    <reportString>performing rapid slash combo</reportString>
    <allowOpportunisticPrefix>false</allowOpportunisticPrefix>
  </JobDef>

  <!-- Job definition for Stinger dash casting -->
  <JobDef>
    <defName>DMC_StingerCast</defName>
    <driverClass>DMCAbilities.JobDriver_StingerCast</driverClass>
    <reportString>performing stinger dash</reportString>
    <allowOpportunisticPrefix>false</allowOpportunisticPrefix>
  </JobDef>

  <!-- Job definition for Gun Stinger dash casting -->
  <JobDef>
    <defName>DMC_GunStingerCast</defName>
    <driverClass>DMCAbilities.JobDriver_GunStingerCast</driverClass>
    <reportString>performing gun stinger dash</reportString>
    <allowOpportunisticPrefix>false</allowOpportunisticPrefix>
  </JobDef>

  <!-- Rapid Slash Spectral Sword Projectile -->
  <ThingDef ParentName="BaseBullet">
    <defName>DMC_SpectralSwordRapidSlashProjectile</defName>
    <label>spectral sword</label>
    <thingClass>DMCAbilities.Projectile_SpectralSwordRapidSlash</thingClass>
    <category>Projectile</category>
    <tickerType>Normal</tickerType>
    <altitudeLayer>Projectile</altitudeLayer>
    <useHitPoints>false</useHitPoints>
    <neverMultiSelect>true</neverMultiSelect>
    <graphicData>
      <texPath>Things/Projectile/Bullet_Small</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <shaderType>TransparentPostLight</shaderType>
      <color>(0.6, 0.3, 0.9)</color>
    </graphicData>
    <projectile>
      <damageDef>Cut</damageDef>
      <damageAmountBase>10</damageAmountBase>
      <speed>25</speed>
      <range>8</range>
    </projectile>
  </ThingDef>

  <!-- Red Hot Night Ability -->
  <AbilityDef>
    <defName>DMC_RedHotNight</defName>
    <label>red hot night</label>
    <description>Summon a swarm of colossal Red Orbs to slam down on enemies from above. Cast time determines number of orbs. Can be interrupted for fewer orbs. Scales with shooting skill. RANGED WEAPONS ONLY.</description>
    <iconPath>UI/Abilities/RedHotNight</iconPath>
    <cooldownTicksRange>480</cooldownTicksRange> <!-- 8 seconds -->
    <aiCanUse>true</aiCanUse>
    <verbProperties>
      <verbClass>DMCAbilities.Verb_RedHotNight</verbClass>
      <range>25</range>
      <warmupTime>3.0</warmupTime>
      <soundCast>Psycast_Skip_Pulse</soundCast>
      <targetParams>
        <canTargetPawns>false</canTargetPawns>
        <canTargetBuildings>false</canTargetBuildings>
        <canTargetItems>false</canTargetItems>
        <canTargetLocations>true</canTargetLocations>
        <canTargetSelf>false</canTargetSelf>
        <showRangeOnSelect>true</showRangeOnSelect>
      </targetParams>
    </verbProperties>
    <jobDef>CastAbilityOnCell</jobDef>
  </AbilityDef>

  <!-- Red Orb Projectile -->
  <ThingDef ParentName="BaseBullet">
    <defName>DMC_RedOrbProjectile</defName>
    <label>red orb</label>
    <graphicData>
      <texPath>Things/projectiles/red_hot_night_projectile</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <shaderType>TransparentPostLight</shaderType>
      <drawSize>1.2</drawSize>
    </graphicData>
    <thingClass>DMCAbilities.Projectile_RedOrb</thingClass>
    <altitudeLayer>Projectile</altitudeLayer>
    <useHitPoints>false</useHitPoints>
    <neverMultiSelect>true</neverMultiSelect>
    <projectile>
      <damageDef>Burn</damageDef>
      <damageAmountBase>25</damageAmountBase>
      <explosionRadius>2.5</explosionRadius>
      <speed>0</speed>
      <soundHitThickRoof>Artillery_HitThickRoof</soundHitThickRoof>
      <soundExplode>Explosion_Bomb</soundExplode>
    </projectile>
  </ThingDef>

  <!-- Devil Trigger Ability -->
  <AbilityDef>
    <defName>DMC_DevilTrigger</defName>
    <label>devil trigger</label>
    <description>Transform into a demonic state, greatly enhancing combat capabilities for 30 seconds. Increases damage, accuracy, movement speed, and defense. Long cooldown that reduces by 0.1 seconds per damage dealt and 0.5 seconds per kill. Cannot be used while already transformed.</description>
    <iconPath>UI/Abilities/DT</iconPath>
    <cooldownTicksRange>9000</cooldownTicksRange> <!-- 2.5 minutes base -->
    <aiCanUse>false</aiCanUse>
    <targetRequired>false</targetRequired>
    <verbProperties>
      <verbClass>DMCAbilities.Verb_DevilTrigger</verbClass>
      <warmupTime>1.0</warmupTime>
      <soundCast>PsycastPsychicEffect</soundCast>
      <range>0</range>
      <targetParams>
        <canTargetSelf>true</canTargetSelf>
        <canTargetPawns>false</canTargetPawns>
        <canTargetBuildings>false</canTargetBuildings>
        <canTargetItems>false</canTargetItems>
        <canTargetLocations>false</canTargetLocations>
      </targetParams>
    </verbProperties>
  </AbilityDef>

  <!-- Sin Devil Trigger Ability -->
  <AbilityDef>
    <defName>DMC_SinDevilTrigger</defName>
    <label>sin devil trigger</label>
    <description>Ultimate transformation unleashing maximum demonic power for 60 seconds. Massive combat enhancements plus immunity to terrain movement penalties. Very long cooldown that reduces by 0.1 seconds per damage dealt and 0.5 seconds per kill. Cannot be used while already transformed.</description>
    <iconPath>UI/Abilities/SDT</iconPath>
    <cooldownTicksRange>18000</cooldownTicksRange> <!-- 5 minutes base -->
    <aiCanUse>false</aiCanUse>
    <targetRequired>false</targetRequired>
    <verbProperties>
      <verbClass>DMCAbilities.Verb_SinDevilTrigger</verbClass>
      <warmupTime>1.5</warmupTime>
      <soundCast>PsycastPsychicPulse</soundCast>
      <range>0</range>
      <targetParams>
        <canTargetSelf>true</canTargetSelf>
        <canTargetPawns>false</canTargetPawns>
        <canTargetBuildings>false</canTargetBuildings>
        <canTargetItems>false</canTargetItems>
        <canTargetLocations>false</canTargetLocations>
      </targetParams>
    </verbProperties>
  </AbilityDef>

</Defs>